<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FinFlow SIP & EMI Studio</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg-1: #020617;
      --bg-2: #0b1120;
      --bg-3: #020617;
      --accent: #38bdf8;
      --accent-strong: #0ea5e9;
      --accent-soft: rgba(56, 189, 248, 0.18);
      --warn: #f97316;
      --success: #22c55e;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --border-subtle: #1f2937;
      --radius-xl: 24px;
      --radius-lg: 18px;
      --radius-md: 12px;
      --shadow-soft: 0 26px 90px rgba(15, 23, 42, 0.9);
      --shadow-subtle: 0 14px 40px rgba(15, 23, 42, 0.9);
      --transition-fast: 0.18s ease-out;
      --transition-med: 0.28s ease-out;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
        "Segoe UI", sans-serif;
      font-size: 16px;
      line-height: 1.5;
      color: var(--text);
      background: #020617;
      display: flex;
      flex-direction: column;
      overflow-x: hidden;
    }

    /* Animated gradient background layer */

    .bg-animated {
      position: fixed;
      inset: 0;
      z-index: -3;
      background: radial-gradient(circle at 0% 0%, #0b1120 0, #020617 45%, #000 100%);
      overflow: hidden;
    }

    .bg-gradient {
      position: absolute;
      inset: -40%;
      background: radial-gradient(circle at 0% 0%, #0ea5e9 0, transparent 45%),
                  radial-gradient(circle at 100% 0%, #6366f1 0, transparent 45%),
                  radial-gradient(circle at 50% 100%, #22c55e 0, transparent 50%);
      opacity: 0.55;
      filter: blur(40px);
      animation: bgShift 18s ease-in-out infinite alternate;
      will-change: transform, opacity;
    }

    @keyframes bgShift {
      0% {
        transform: translate3d(0, 0, 0) scale(1);
        opacity: 0.55;
      }
      50% {
        transform: translate3d(-4%, 3%, 0) scale(1.05);
        opacity: 0.7;
      }
      100% {
        transform: translate3d(4%, -3%, 0) scale(1.08);
        opacity: 0.6;
      }
    }

    /* Floating light orbs */

    .bg-orb {
      position: absolute;
      border-radius: 999px;
      filter: blur(35px);
      opacity: 0.22;
      mix-blend-mode: screen;
      will-change: transform, opacity;
    }

    .bg-orb.orb-1 {
      width: 320px;
      height: 320px;
      background: #38bdf8;
      top: 6%;
      left: 8%;
      animation: orbFloat1 24s ease-in-out infinite;
    }

    .bg-orb.orb-2 {
      width: 260px;
      height: 260px;
      background: #6366f1;
      top: 60%;
      right: 5%;
      animation: orbFloat2 26s ease-in-out infinite;
    }

    .bg-orb.orb-3 {
      width: 180px;
      height: 180px;
      background: #22c55e;
      bottom: -4%;
      left: 35%;
      animation: orbFloat3 30s ease-in-out infinite;
    }

    @keyframes orbFloat1 {
      0%   { transform: translate3d(0, 0, 0) scale(1); }
      50%  { transform: translate3d(30px, -20px, 0) scale(1.08); }
      100% { transform: translate3d(-20px, 30px, 0) scale(0.98); }
    }

    @keyframes orbFloat2 {
      0%   { transform: translate3d(0, 0, 0) scale(1); }
      50%  { transform: translate3d(-40px, 20px, 0) scale(1.04); }
      100% { transform: translate3d(20px, -30px, 0) scale(0.96); }
    }

    @keyframes orbFloat3 {
      0%   { transform: translate3d(0, 0, 0) scale(1); }
      50%  { transform: translate3d(10px, -25px, 0) scale(1.06); }
      100% { transform: translate3d(-15px, 15px, 0) scale(0.97); }
    }

    /* CONTENT SHELL */

    .shell {
      max-width: 1240px;
      margin: 0 auto;
      padding: 28px 18px 40px;
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 24px;
      position: relative;
      z-index: 1;
    }

    /* HEADER */

    .app-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
    }

    .brand-mark {
      width: 46px;
      height: 46px;
      border-radius: 18px;
      background: radial-gradient(circle at 0 0, #38bdf8, #a855f7 50%, #22c55e 100%);
      position: relative;
      overflow: hidden;
      box-shadow: 0 16px 50px rgba(56, 189, 248, 0.75);
      transform-style: preserve-3d;
      perspective: 600px;
      transition: transform 0.4s ease-out, box-shadow 0.4s ease-out;
      will-change: transform, box-shadow;
    }

    .brand-mark:hover {
      transform: translateY(-2px) rotateX(6deg) rotateY(-4deg);
      box-shadow: 0 24px 70px rgba(56, 189, 248, 0.85);
    }

    .brand-mark::after {
      content: "";
      position: absolute;
      inset: 3px;
      border-radius: 15px;
      background: radial-gradient(circle at 20% 20%, #020617, #020617 60%, #020617);
    }

    .brand-inner-orbit {
      position: absolute;
      inset: 11px;
      border-radius: 999px;
      border: 1px dashed rgba(56, 189, 248, 0.7);
      box-shadow: 0 0 22px rgba(56, 189, 248, 0.9);
      animation: orbitPulse 3s ease-in-out infinite;
      will-change: transform, opacity;
    }

    @keyframes orbitPulse {
      0%, 100% { transform: scale(1); opacity: 0.9; }
      50%      { transform: scale(1.06); opacity: 1; }
    }

    .brand-copy h1 {
      margin: 0;
      font-size: 24px;
      letter-spacing: 0.02em;
    }

    .brand-copy span {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: var(--muted);
    }

    .tag-dot {
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: var(--success);
      box-shadow: 0 0 12px rgba(34, 197, 94, 0.8);
      animation: glowPulse 2.5s ease-in-out infinite;
    }

    @keyframes glowPulse {
      0%, 100% { box-shadow: 0 0 10px rgba(34, 197, 94, 0.6); }
      50%      { box-shadow: 0 0 18px rgba(34, 197, 94, 1); }
    }

    /* TOP GRID */

    .top-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.3fr);
      gap: 22px;
      align-items: stretch;
    }

    @media (max-width: 960px) {
      .top-grid { grid-template-columns: minmax(0, 1fr); }
    }

    .card {
      border-radius: var(--radius-xl);
      background: rgba(15, 23, 42, 0.94);
      border: 1px solid rgba(148, 163, 184, 0.26);
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
      transform: translateY(0);
      transition: transform 0.22s ease-out, box-shadow 0.22s ease-out, border-color 0.22s ease-out, background 0.22s ease-out;
      will-change: transform, box-shadow;
      backdrop-filter: blur(18px);
    }

    .card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.18), transparent 60%),
        radial-gradient(circle at 100% 0, rgba(129, 140, 248, 0.22), transparent 60%);
      opacity: 0.7;
      pointer-events: none;
    }

    .card:hover {
      transform: translateY(-3px);
      box-shadow: 0 30px 100px rgba(15, 23, 42, 0.98);
      border-color: rgba(56, 189, 248, 0.5);
      background: rgba(15, 23, 42, 0.98);
    }

    .card-content {
      position: relative;
      z-index: 1;
      padding: 20px 20px 18px;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 14px;
      margin-bottom: 14px;
    }

    .card-title {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .card-title h2 {
      margin: 0;
      font-size: 20px;
      letter-spacing: 0.01em;
    }

    .card-title span {
      font-size: 14px;
      color: var(--muted);
    }

    .mode-toggle {
      display: inline-flex;
      padding: 4px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.96);
      border: 1px solid var(--border-subtle);
      box-shadow: var(--shadow-subtle);
    }

    .mode-btn {
      border: none;
      background: transparent;
      padding: 8px 18px;
      border-radius: 999px;
      font-size: 14px;
      color: var(--muted);
      cursor: pointer;
      position: relative;
      transition: color var(--transition-fast), transform var(--transition-fast), background 0.2s ease-out;
      will-change: transform, background;
      overflow: hidden;
    }

    .mode-btn span {
      margin-left: 6px;
      font-size: 16px;
    }

    .mode-btn::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.2), transparent 55%);
      opacity: 0;
      transition: opacity 0.2s ease-out;
      pointer-events: none;
    }

    .mode-btn:hover::after { opacity: 1; }

    .mode-btn.active {
      color: #e5f3ff;
      transform: translateY(-1px);
    }

    .mode-btn.active::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: inherit;
      background: linear-gradient(135deg, #0f172a, #020617);
      box-shadow:
        0 0 0 1px rgba(56, 189, 248, 0.9),
        0 18px 45px rgba(8, 47, 73, 0.95);
      z-index: -1;
    }

    /* FORM */

    .form-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 16px 20px;
      margin-bottom: 14px;
    }

    @media (max-width: 640px) {
      .form-grid { grid-template-columns: minmax(0, 1fr); }
    }

    .field {
      display: flex;
      flex-direction: column;
      gap: 7px;
    }

    .field-label {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--muted);
    }

    .field-hint {
      font-size: 12px;
      color: rgba(148, 163, 184, 0.9);
    }

    .help-icon {
      width: 17px;
      height: 17px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.7);
      font-size: 10px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      position: relative;
      background: rgba(15, 23, 42, 0.98);
      color: var(--muted);
      transition: transform 0.18s ease-out, box-shadow 0.18s ease-out, border-color 0.18s ease-out;
      will-change: transform, box-shadow;
    }

    .help-icon:hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 26px rgba(15, 23, 42, 0.9);
      border-color: rgba(56, 189, 248, 0.8);
    }

    .help-icon::after {
      content: attr(data-tooltip);
      position: absolute;
      left: 50%;
      bottom: 130%;
      transform: translateX(-50%) translateY(8px);
      background: #020617;
      color: #e5e7eb;
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 10px;
      border: 1px solid rgba(148, 163, 184, 0.8);
      white-space: nowrap;
      opacity: 0;
      pointer-events: none;
      box-shadow: 0 20px 60px rgba(15, 23, 42, 0.95);
      transition: opacity var(--transition-fast), transform var(--transition-fast);
      z-index: 10;
    }

    .help-icon:hover::after {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .input-shell {
      position: relative;
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: var(--radius-md);
      border: 1px solid rgba(31, 41, 55, 0.98);
      background: radial-gradient(circle at top, #020617, #020617);
      transition: border-color var(--transition-fast), box-shadow var(--transition-fast),
        transform var(--transition-fast), background var(--transition-fast);
      will-change: transform, box-shadow;
      overflow: hidden;
    }

    .input-shell::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 0 0, var(--accent-soft), transparent 55%);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-out;
    }

    .input-shell:focus-within::after { opacity: 1; }

    .input-shell:focus-within {
      border-color: rgba(56, 189, 248, 0.95);
      box-shadow:
        0 0 0 1px rgba(56, 189, 248, 0.9),
        0 20px 55px rgba(8, 47, 73, 0.98);
      transform: translateY(-1px);
      background: radial-gradient(circle at top, #020617, #020617);
    }

    .prefix {
      font-size: 14px;
      color: var(--muted);
    }

    input,
    select,
    textarea {
      border: none;
      outline: none;
      background: transparent;
      color: var(--text);
      font-size: 15px;
      width: 100%;
      font-family: inherit;
    }

    input::placeholder,
    textarea::placeholder {
      color: rgba(148, 163, 184, 0.7);
    }

    .form-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-top: 6px;
      align-items: center;
      justify-content: space-between;
    }

    .btn-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .btn {
      position: relative;
      border-radius: 999px;
      border: none;
      padding: 10px 20px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      overflow: hidden;
      transform-origin: center;
      transition: transform var(--transition-fast), box-shadow var(--transition-fast),
        background var(--transition-fast), color var(--transition-fast);
      will-change: transform, box-shadow, opacity;
    }

    .btn-primary {
      background: radial-gradient(circle at 0 0, #38bdf8, #0ea5e9);
      color: #020617;
      box-shadow: 0 22px 70px rgba(8, 47, 73, 0.98);
    }

    .btn-primary::after {
      content: "";
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 10% 0, rgba(255, 255, 255, 0.35), transparent 55%);
      transform: translateX(-140%);
      opacity: 0.9;
      pointer-events: none;
      transition: transform 0.6s ease-out;
    }

    .btn-primary:hover::after { transform: translateX(40%); }

    .btn-primary:hover {
      transform: translateY(-1px) scale(1.02);
      box-shadow: 0 28px 90px rgba(8, 47, 73, 0.98);
    }

    .btn-primary:active {
      transform: translateY(0) scale(0.97);
      box-shadow: 0 14px 40px rgba(8, 47, 73, 0.95);
    }

    .btn-secondary {
      background: rgba(15, 23, 42, 0.98);
      color: var(--muted);
      border: 1px solid rgba(148, 163, 184, 0.7);
    }

    .btn-secondary:hover {
      background: rgba(15, 23, 42, 1);
      color: #e5e7eb;
      transform: translateY(-1px);
      box-shadow: 0 18px 55px rgba(15, 23, 42, 0.98);
    }

    .btn-secondary:active {
      transform: translateY(0) scale(0.97);
      box-shadow: 0 10px 32px rgba(15, 23, 42, 0.98);
    }

    .btn-icon { font-size: 16px; }

    .mini-note {
      font-size: 12px;
      color: var(--muted);
    }

    .error {
      margin-top: 8px;
      font-size: 13px;
      color: #fecaca;
      min-height: 18px;
    }

    .btn-ripple {
      position: absolute;
      border-radius: 999px;
      transform: scale(0);
      background: rgba(15, 23, 42, 0.25);
      animation: ripple 0.5s ease-out forwards;
      pointer-events: none;
    }

    @keyframes ripple {
      to {
        transform: scale(4);
        opacity: 0;
      }
    }

    /* SUMMARY */

    .summary-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.1fr) minmax(0, 1fr);
      gap: 14px;
    }

    @media (max-width: 520px) {
      .summary-grid { grid-template-columns: minmax(0, 1fr); }
    }

    .summary-block {
      border-radius: var(--radius-lg);
      background: radial-gradient(circle at 0 0, #020617, #020617);
      border: 1px solid rgba(30, 64, 175, 0.8);
      padding: 14px 14px 12px;
      box-shadow: var(--shadow-subtle);
      position: relative;
      overflow: hidden;
    }

    .summary-block:first-child::after {
      content: "";
      position: absolute;
      inset: 0;
      background: linear-gradient(
        120deg,
        transparent 0%,
        rgba(56, 189, 248, 0.05) 40%,
        rgba(129, 140, 248, 0.15) 50%,
        transparent 70%
      );
      transform: translateX(-120%);
      opacity: 0;
      pointer-events: none;
      animation: summaryShimmer 7s ease-in-out infinite;
    }

    @keyframes summaryShimmer {
      0%, 70% {
        transform: translateX(-120%);
        opacity: 0;
      }
      80% {
        opacity: 1;
      }
      100% {
        transform: translateX(120%);
        opacity: 0;
      }
    }

    .summary-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      position: relative;
      z-index: 1;
    }

    .summary-header span:first-child {
      font-size: 13px;
      text-transform: uppercase;
      letter-spacing: 0.16em;
      color: rgba(191, 219, 254, 0.95);
    }

    .summary-pill {
      font-size: 12px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(129, 140, 248, 0.95);
      color: #c7d2fe;
    }

    .metric-main {
      display: flex;
      flex-direction: column;
      gap: 5px;
      position: relative;
      z-index: 1;
    }

    .metric-label {
      font-size: 13px;
      color: var(--muted);
    }

    .metric-value {
      display: inline-flex;
      align-items: baseline;
      gap: 6px;
      font-size: 26px;
      font-weight: 600;
      letter-spacing: 0.02em;
    }

    .metric-currency {
      font-size: 15px;
      color: rgba(148, 163, 184, 0.95);
    }

    .metric-sub {
      font-size: 13px;
      color: rgba(148, 163, 184, 0.97);
    }

    .metric-side {
      font-size: 15px;
      color: rgba(148, 163, 184, 0.97);
      display: flex;
      flex-direction: column;
      gap: 6px;
      align-items: flex-end;
    }

    .metric-chip {
      align-self: flex-start;
      margin-top: 6px;
      background: rgba(15, 23, 42, 0.97);
      border-radius: 999px;
      padding: 5px 10px;
      border: 1px solid rgba(56, 189, 248, 0.8);
      font-size: 12px;
      color: #e0f2fe;
      display: inline-flex;
      align-items: center;
      gap: 7px;
    }

    .metric-dot {
      width: 9px;
      height: 9px;
      border-radius: 999px;
      background: linear-gradient(135deg, #22c55e, #4ade80);
      box-shadow: 0 0 0 4px rgba(34, 197, 94, 0.28);
    }

    .results-animate {
      animation: fadeUp 0.45s var(--transition-med);
    }

    @keyframes fadeUp {
      0% { opacity: 0; transform: translateY(12px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    /* VISUALIZATION */

    .viz-row {
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.2fr);
      gap: 22px;
      margin-top: 8px;
    }

    @media (max-width: 960px) {
      .viz-row { grid-template-columns: minmax(0, 1fr); }
    }

    .viz-card {
      border-radius: var(--radius-xl);
      background: rgba(15, 23, 42, 0.95);
      border: 1px solid rgba(56, 189, 248, 0.4);
      padding: 18px 18px 16px;
      box-shadow: var(--shadow-soft);
      position: relative;
      overflow: hidden;
      transform: translateY(0);
      transition: transform 0.22s ease-out, box-shadow 0.22s ease-out, border-color 0.22s ease-out, background 0.22s ease-out;
      will-change: transform, box-shadow;
      backdrop-filter: blur(18px);
    }

    .viz-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 32px 95px rgba(8, 47, 73, 0.98);
      border-color: rgba(56, 189, 248, 0.7);
      background: rgba(15, 23, 42, 0.99);
    }

    .viz-card::before {
      content: "";
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 10% 0, rgba(56, 189, 248, 0.22), transparent 60%),
        radial-gradient(circle at 100% 100%, rgba(129, 140, 248, 0.26), transparent 60%);
      opacity: 0.9;
      pointer-events: none;
    }

    .viz-header {
      position: relative;
      z-index: 1;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 12px;
    }

    .viz-header-left {
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .viz-heading {
      font-size: 18px;
      font-weight: 600;
    }

    .viz-subheading {
      font-size: 14px;
      color: var(--muted);
    }

    .viz-tag {
      font-size: 13px;
      padding: 5px 12px;
      border-radius: 999px;
      border: 1px solid rgba(56, 189, 248, 0.85);
      background: rgba(15, 23, 42, 0.96);
      color: #e0f2fe;
      transition: transform 0.18s ease-out, box-shadow 0.18s ease-out;
    }

    .viz-card:hover .viz-tag {
      transform: translateY(-1px);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.8);
    }

    .viz-body {
      position: relative;
      z-index: 1;
      min-height: 240px;
    }

    .viz-body canvas {
      width: 100% !important;
      height: 240px !important;
    }

    .viz-animate {
      animation: vizPop 0.55s ease-out;
    }

    @keyframes vizPop {
      0% { opacity: 0.2; transform: translateY(14px) scale(0.97); }
      100% { opacity: 1; transform: translateY(0) scale(1); }
    }

    .pie-card-inner {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .viz-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .viz-legend-item {
      display: inline-flex;
      align-items: center;
      gap: 5px;
      font-size: 13px;
      color: var(--muted);
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15, 23, 42, 0.97);
      border: 1px solid rgba(30, 64, 175, 0.9);
      transition: transform 0.18s ease-out, box-shadow 0.18s ease-out,
        border-color 0.18s ease-out, background 0.18s ease-out;
      will-change: transform, box-shadow;
      cursor: default;
    }

    .viz-legend-dot {
      width: 10px;
      height: 10px;
      border-radius: 999px;
      box-shadow: 0 0 0 4px rgba(15, 23, 42, 0.95);
    }

    .viz-legend-item:hover {
      transform: translateY(-1px);
      border-color: rgba(56, 189, 248, 0.95);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.8);
      background: rgba(15, 23, 42, 1);
    }

    /* BOTTOM GRID */

    .bottom-grid {
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.3fr);
      gap: 22px;
      margin-top: 14px;
    }

    @media (max-width: 960px) {
      .bottom-grid { grid-template-columns: minmax(0, 1fr); }
    }

    .info-card,
    .contact-card {
      border-radius: var(--radius-xl);
      background: rgba(15, 23, 42, 0.97);
      border: 1px solid rgba(148, 163, 184, 0.3);
      box-shadow: var(--shadow-soft);
      padding: 18px 20px 16px;
      font-size: 14px;
      color: var(--muted);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(18px);
    }

    .info-card::before,
    .contact-card::before {
      content: "";
      position: absolute;
      inset: -30%;
      background: radial-gradient(circle at 0 0, rgba(56, 189, 248, 0.12), transparent 55%);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.2s ease-out;
    }

    .info-card:hover::before,
    .contact-card:hover::before {
      opacity: 1;
    }

    .info-card h2,
    .contact-card h2 {
      margin: 0 0 10px;
      font-size: 18px;
      color: var(--text);
    }

    .info-card ul {
      margin: 10px 0 0;
      padding-left: 20px;
    }

    .info-card li {
      margin-bottom: 6px;
    }

    .contact-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr);
      gap: 10px;
      margin-top: 8px;
    }

    /* FOOTER */

    footer {
      border-top: 1px solid var(--border-subtle);
      padding: 16px 18px 18px;
      background: rgba(2, 6, 23, 0.98);
      font-size: 13px;
      color: var(--muted);
      position: relative;
      z-index: 1;
    }

    .footer-inner {
      max-width: 1240px;
      margin: 0 auto;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      align-items: center;
      justify-content: space-between;
    }

    .footer-links {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .footer-links a {
      color: rgba(148, 163, 184, 0.97);
      text-decoration: none;
      padding: 4px 10px;
      border-radius: 999px;
      transition: background var(--transition-fast), color var(--transition-fast), transform 0.18s ease-out;
    }

    .footer-links a:hover {
      background: rgba(15, 23, 42, 1);
      color: #e5f3ff;
      transform: translateY(-1px);
    }

    .disclaimer {
      max-width: 540px;
      text-align: right;
    }
  </style>
</head>
<body>
  <!-- Animated background -->
  <div class="bg-animated">
    <div class="bg-gradient"></div>
    <div class="bg-orb orb-1"></div>
    <div class="bg-orb orb-2"></div>
    <div class="bg-orb orb-3"></div>
  </div>

  <div class="shell">
    <!-- HEADER -->
    <header class="app-header">
      <div class="brand">
        <div class="brand-mark">
          <div class="brand-inner-orbit"></div>
        </div>
        <div class="brand-copy">
          <h1>FinFlow SIP &amp; EMI Studio</h1>
          <span><span class="tag-dot"></span>Plan, simulate & visualise</span>
        </div>
      </div>
    </header>

    <!-- TOP GRID -->
    <section class="top-grid">
      <!-- CALCULATOR -->
      <div class="card" aria-label="SIP and EMI calculator">
        <div class="card-content">
          <div class="card-header">
            <div class="card-title">
              <h2 id="form-title">SIP inputs</h2>
              <span id="form-sub">
                Define your systematic investment plan to project future value.
              </span>
            </div>
            <div class="mode-toggle" aria-label="Calculator mode">
              <button class="mode-btn active" data-mode="sip" type="button">
                SIP<span>ðŸ“ˆ</span>
              </button>
              <button class="mode-btn" data-mode="emi" type="button">
                EMI<span>ðŸ“Š</span>
              </button>
            </div>
          </div>

          <!-- SIP FIELDS -->
          <div class="form-grid" id="sip-fields">
            <div class="field">
              <div class="field-label">
                Monthly SIP amount
                <span class="help-icon"
                  data-tooltip="The fixed amount you plan to invest every month via SIP.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <span class="prefix">â‚¹</span>
                <input id="sip-amount" type="number" min="0" step="100" placeholder="e.g. 5000" />
              </div>
              <div class="field-hint">Try values from â‚¹1,000 to â‚¹50,000.</div>
            </div>
            <div class="field">
              <div class="field-label">
                Investment duration (years)
                <span class="help-icon"
                  data-tooltip="Total period for which you will continue the SIP.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <input id="sip-years" type="number" min="1" max="50" step="1" placeholder="e.g. 15" />
              </div>
              <div class="field-hint">Longer horizons show compounding better.</div>
            </div>
            <div class="field">
              <div class="field-label">
                Expected annual return (%)
                <span class="help-icon"
                  data-tooltip="Estimated annualised rate of return before taxes.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <input id="sip-rate" type="number" min="1" max="30" step="0.1" placeholder="e.g. 12" />
              </div>
              <div class="field-hint">Equity SIPs often assume 10â€“15% for illustration.</div>
            </div>
            <div class="field">
              <div class="field-label">
                SIP frequency
                <span class="help-icon"
                  data-tooltip="Most SIPs are monthly. Yearly is for bulk annual contributions.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <select id="sip-frequency">
                  <option value="monthly" selected>Monthly</option>
                  <option value="yearly">Yearly</option>
                </select>
              </div>
            </div>
          </div>

          <!-- EMI FIELDS -->
          <div class="form-grid" id="emi-fields" style="display:none;">
            <div class="field">
              <div class="field-label">
                Loan amount (principal)
                <span class="help-icon"
                  data-tooltip="Total amount borrowed from the lender.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <span class="prefix">â‚¹</span>
                <input id="emi-principal" type="number" min="0" step="1000" placeholder="e.g. 1500000" />
              </div>
              <div class="field-hint">Typical home loans start in lakhs.</div>
            </div>
            <div class="field">
              <div class="field-label">
                Loan tenure (years)
                <span class="help-icon"
                  data-tooltip="Duration of the loan in years.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <input id="emi-years" type="number" min="1" max="40" step="1" placeholder="e.g. 20" />
              </div>
              <div class="field-hint">Shorter tenures reduce total interest paid.</div>
            </div>
            <div class="field">
              <div class="field-label">
                Interest rate (annual %)
                <span class="help-icon"
                  data-tooltip="Annual interest rate charged on your loan.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <input id="emi-rate" type="number" min="1" max="24" step="0.1" placeholder="e.g. 8.5" />
              </div>
              <div class="field-hint">Use your bankâ€™s effective annual rate.</div>
            </div>
            <div class="field">
              <div class="field-label">
                Repayment frequency
                <span class="help-icon"
                  data-tooltip="Most loans use monthly EMIs.">
                  ?
                </span>
              </div>
              <div class="input-shell">
                <select id="emi-frequency">
                  <option value="monthly" selected>Monthly</option>
                </select>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <div class="btn-row">
              <button class="btn btn-primary js-ripple" id="btn-sip" type="button">
                <span class="btn-icon">âš¡</span>
                Calculate SIP
              </button>
              <button class="btn btn-primary js-ripple" id="btn-emi" type="button" style="display:none;">
                <span class="btn-icon">âš¡</span>
                Calculate EMI
              </button>
              <button class="btn btn-secondary" id="btn-reset" type="button">
                Reset
              </button>
            </div>
            <div class="mini-note">
              Hint: Change one input at a time and watch the charts update.
            </div>
          </div>

          <div class="error" id="error-msg" aria-live="polite"></div>
        </div>
      </div>

      <!-- SUMMARY -->
      <div class="card">
        <div class="card-content">
          <div class="summary-grid" id="summary-panel">
            <div class="summary-block">
              <div class="summary-header">
                <span id="results-title">SIP projection</span>
                <span class="summary-pill" id="results-badge">Monthly compounding</span>
              </div>
              <div class="metric-main">
                <span class="metric-label" id="metric-main-label">Estimated corpus at maturity</span>
                <div class="metric-value">
                  <span class="metric-currency">â‚¹</span>
                  <span id="metric-main-value">0</span>
                </div>
                <span class="metric-sub" id="metric-main-sub">
                  Start by entering SIP details to view your projected wealth.
                </span>
              </div>
            </div>
            <div class="summary-block">
              <div class="metric-side">
                <span id="metric-side-line1">Total invested: â‚¹0</span>
                <span id="metric-side-line2">Total returns: â‚¹0</span>
              </div>
              <span class="metric-chip">
                <span class="metric-dot"></span>
                <span id="metric-chip-label">Compounding in progress</span>
              </span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- VISUALIZATION -->
    <section class="viz-row" aria-label="Charts and breakdowns">
      <div class="viz-card">
        <div class="viz-header">
          <div class="viz-header-left">
            <div class="viz-heading" id="viz-line-heading">Corpus / balance over time</div>
            <div class="viz-subheading" id="viz-line-sub">
              Yearâ€‘wise trajectory of your investment or outstanding loan.
            </div>
          </div>
          <div class="viz-tag" id="viz-line-tag">SIP mode</div>
        </div>
        <div class="viz-body">
          <canvas id="lineChart"></canvas>
        </div>
      </div>

      <div class="viz-card">
        <div class="viz-header">
          <div class="viz-header-left">
            <div class="viz-heading" id="viz-pie-heading">Composition breakdown</div>
            <div class="viz-subheading" id="viz-pie-sub">
              How much is principal vs growth or interest.
            </div>
          </div>
        <div class="viz-tag" id="viz-pie-tag">Invested vs returns</div>
        </div>
        <div class="viz-body pie-card-inner">
          <canvas id="pieChart"></canvas>
          <div class="viz-legend" id="viz-legend"></div>
        </div>
      </div>
    </section>

    <!-- BOTTOM GRID -->
    <section class="bottom-grid">
      <div class="info-card">
        <h2>What these numbers mean</h2>
        <p>
          SIP calculations use a future value formula for recurring investments, converting your annual return into a monthly rate and compounding every period. [web:3][web:4][web:6][web:23]
        </p>
        <p>
          EMI outputs follow the standard equated monthly installment formula using your principal, tenor in months, and monthly interest rate to derive a fixed payment. [web:6][web:9][web:23]
        </p>
        <ul>
          <li>SIP assumes regular investments at the chosen frequency.</li>
          <li>EMI assumes a fixed interest rate and equal monthly payments.</li>
          <li>Realâ€‘world results depend on market performance and lender terms.</li>
        </ul>
      </div>

      <div class="contact-card" aria-label="Contact form">
        <h2>Contact & feedback</h2>
        <p>
          Want a branded version, export to Excel, or extra sliders? Send a note with your requirements.
        </p>
        <form id="contact-form">
          <div class="contact-grid">
            <div class="field">
              <div class="field-label">Name</div>
              <div class="input-shell">
                <input id="contact-name" type="text" placeholder="Your name" />
              </div>
            </div>
            <div class="field">
              <div class="field-label">Email</div>
              <div class="input-shell">
                <input id="contact-email" type="email" placeholder="you@example.com" />
              </div>
            </div>
            <div class="field">
              <div class="field-label">Message</div>
              <div class="input-shell">
                <textarea id="contact-message" placeholder="Share your query or suggestions"></textarea>
              </div>
            </div>
            <div>
              <button class="btn btn-secondary" type="submit">Send message</button>
            </div>
          </div>
        </form>
      </div>
    </section>
  </div>

  <!-- FOOTER -->
  <footer>
    <div class="footer-inner">
      <div class="footer-links">
        <a href="https://www.mutualfundssahihai.com/en/calculators/sip-calculator" target="_blank" rel="noopener">
          Learn about SIPs
        </a>
        <a href="https://cleartax.in/s/emi-calculation-formula" target="_blank" rel="noopener">
          EMI formula guide
        </a>
        <a href="https://www.chartjs.org/docs/latest/" target="_blank" rel="noopener">
          Chart.js docs
        </a>
      </div>
      <div class="disclaimer">
        This experience is for education only and does not constitute financial advice. Always consult a registered advisor before investing or borrowing.
      </div>
    </div>
  </footer>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    const modeButtons = document.querySelectorAll(".mode-btn");
    const sipFields = document.getElementById("sip-fields");
    const emiFields = document.getElementById("emi-fields");
    const btnSip = document.getElementById("btn-sip");
    const btnEmi = document.getElementById("btn-emi");
    const btnReset = document.getElementById("btn-reset");
    const errorMsg = document.getElementById("error-msg");

    const formTitle = document.getElementById("form-title");
    const formSub = document.getElementById("form-sub");

    const resultsTitle = document.getElementById("results-title");
    const resultsBadge = document.getElementById("results-badge");
    const metricMainLabel = document.getElementById("metric-main-label");
    const metricMainValue = document.getElementById("metric-main-value");
    const metricMainSub = document.getElementById("metric-main-sub");
    const metricSideLine1 = document.getElementById("metric-side-line1");
    const metricSideLine2 = document.getElementById("metric-side-line2");
    const metricChipLabel = document.getElementById("metric-chip-label");
    const summaryPanel = document.getElementById("summary-panel");

    const vizLineHeading = document.getElementById("viz-line-heading");
    const vizLineSub = document.getElementById("viz-line-sub");
    const vizLineTag = document.getElementById("viz-line-tag");
    const vizPieHeading = document.getElementById("viz-pie-heading");
    const vizPieSub = document.getElementById("viz-pie-sub");
    const vizPieTag = document.getElementById("viz-pie-tag");
    const vizLegend = document.getElementById("viz-legend");
    const vizCards = document.querySelectorAll(".viz-card");

    let currentMode = "sip";

    function setMode(mode) {
      currentMode = mode;
      modeButtons.forEach((btn) =>
        btn.classList.toggle("active", btn.dataset.mode === mode)
      );

      const isSip = mode === "sip";
      sipFields.style.display = isSip ? "grid" : "none";
      emiFields.style.display = isSip ? "none" : "grid";
      btnSip.style.display = isSip ? "inline-flex" : "none";
      btnEmi.style.display = isSip ? "none" : "inline-flex";
      errorMsg.textContent = "";
      summaryPanel.classList.remove("results-animate");

      if (isSip) {
        formTitle.textContent = "SIP inputs";
        formSub.textContent =
          "Define your systematic investment plan to project future value.";
        resultsTitle.textContent = "SIP projection";
        resultsBadge.textContent = "Monthly compounding";
        metricMainLabel.textContent = "Estimated corpus at maturity";
        metricMainValue.textContent = "0";
        metricMainSub.textContent =
          "Start by entering SIP details to view your projected wealth.";
        metricSideLine1.textContent = "Total invested: â‚¹0";
        metricSideLine2.textContent = "Total returns: â‚¹0";
        metricChipLabel.textContent = "Compounding in progress";

        vizLineHeading.textContent = "Corpus over time";
        vizLineSub.textContent =
          "Projected wealth at the end of each year of your SIP.";
        vizLineTag.textContent = "SIP mode";
        vizPieHeading.textContent = "Invested vs returns";
        vizPieSub.textContent =
          "Proportion of your contributions versus market gains.";
        vizPieTag.textContent = "Wealth breakdown";
      } else {
        formTitle.textContent = "EMI inputs";
        formSub.textContent =
          "Describe your loan to estimate EMI, interest and payoff timeline.";
        resultsTitle.textContent = "EMI breakdown";
        resultsBadge.textContent = "Fixedâ€‘rate loan";
        metricMainLabel.textContent = "Approx. monthly EMI";
        metricMainValue.textContent = "0";
        metricMainSub.textContent =
          "Enter loan details to view EMI, total interest and payoff amount.";
        metricSideLine1.textContent = "Total payable: â‚¹0";
        metricSideLine2.textContent = "Total interest: â‚¹0";
        metricChipLabel.textContent = "EMI not calculated yet";

        vizLineHeading.textContent = "Outstanding balance over time";
        vizLineSub.textContent =
          "Approximate loan balance at the end of each year.";
        vizLineTag.textContent = "EMI mode";
        vizPieHeading.textContent = "Principal vs interest";
        vizPieSub.textContent = "Total repayment split by components.";
        vizPieTag.textContent = "Repayment composition";
      }
    }

    modeButtons.forEach((btn) =>
      btn.addEventListener("click", () => setMode(btn.dataset.mode))
    );

    function animateSummary() {
      summaryPanel.classList.remove("results-animate");
      void summaryPanel.offsetWidth;
      summaryPanel.classList.add("results-animate");
    }

    function animateViz() {
      vizCards.forEach((card) => {
        card.classList.remove("viz-animate");
        void card.offsetWidth;
        card.classList.add("viz-animate");
      });
    }

    function formatNumber(n) {
      return n.toLocaleString("en-IN", { maximumFractionDigits: 0 });
    }

    function validatePositiveNumber(value, label) {
      if (value === "" || isNaN(value)) {
        throw new Error(label + " is required.");
      }
      const num = Number(value);
      if (num <= 0) {
        throw new Error(label + " must be greater than zero.");
      }
      return num;
    }

    // Ripple on primary buttons
    document.addEventListener("click", (e) => {
      const btn = e.target.closest(".js-ripple");
      if (!btn) return;
      const rect = btn.getBoundingClientRect();
      const ripple = document.createElement("span");
      const size = Math.max(rect.width, rect.height);
      ripple.className = "btn-ripple";
      ripple.style.width = ripple.style.height = size + "px";
      ripple.style.left = e.clientX - rect.left - size / 2 + "px";
      ripple.style.top = e.clientY - rect.top - size / 2 + "px";
      btn.appendChild(ripple);
      setTimeout(() => ripple.remove(), 500);
    });

    // Chart.js setup
    let lineChart, pieChart;
    const lineCtx = document.getElementById("lineChart").getContext("2d");
    const pieCtx = document.getElementById("pieChart").getContext("2d");

    const baseAnim = { duration: 700, easing: "easeOutCubic" };

    function initCharts() {
      lineChart = new Chart(lineCtx, {
        type: "line",
        data: {
          labels: [],
          datasets: [{
            label: "Value",
            data: [],
            borderColor: "#38bdf8",
            borderWidth: 2.3,
            tension: 0.3,
            pointRadius: 0,
            pointHitRadius: 8,
            fill: true,
            backgroundColor: "rgba(56, 189, 248, 0.16)"
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          animation: baseAnim,
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: "#020617",
              borderColor: "rgba(56, 189, 248, 0.85)",
              borderWidth: 1,
              titleFont: { size: 13 },
              bodyFont: { size: 13 },
              callbacks: {
                label: ctx =>
                  " â‚¹" + formatNumber(Math.round(ctx.parsed.y))
              }
            }
          },
          scales: {
            x: {
              grid: { color: "rgba(30, 64, 175, 0.5)" },
              ticks: {
                color: "rgba(148, 163, 184, 0.97)",
                maxTicksLimit: 6,
                font: { size: 12 }
              }
            },
            y: {
              grid: { color: "rgba(15, 23, 42, 0.9)" },
              ticks: {
                color: "rgba(148, 163, 184, 0.97)",
                maxTicksLimit: 5,
                font: { size: 12 },
                callback: value =>
                  "â‚¹" +
                  (value >= 100000
                    ? (value / 100000).toFixed(1) + "L"
                    : formatNumber(value))
              }
            }
          }
        }
      });

      pieChart = new Chart(pieCtx, {
        type: "doughnut",
        data: {
          labels: ["Invested", "Returns"],
          datasets: [{
            data: [0, 0],
            backgroundColor: ["#38bdf8", "#22c55e"],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          cutout: "70%",
          rotation: -90,
          animation: baseAnim,
          plugins: {
            legend: { display: false },
            tooltip: {
              backgroundColor: "#020617",
              borderColor: "rgba(56, 189, 248, 0.85)",
              borderWidth: 1,
              titleFont: { size: 13 },
              bodyFont: { size: 13 },
              callbacks: {
                label: ctx =>
                  ctx.label + ": â‚¹" + formatNumber(Math.round(ctx.parsed))
              }
            }
          }
        }
      });

      updateLegend(["Invested", "Returns"], ["#38bdf8", "#22c55e"]);
    }

    function updateLegend(labels, colors) {
      vizLegend.innerHTML = "";
      labels.forEach((label, idx) => {
        const item = document.createElement("div");
        item.className = "viz-legend-item";
        const dot = document.createElement("div");
        dot.className = "viz-legend-dot";
        dot.style.background = colors[idx];
        item.appendChild(dot);
        const text = document.createElement("span");
        text.textContent = label;
        item.appendChild(text);
        vizLegend.appendChild(item);
      });
    }

    function calculateSip() {
      try {
        errorMsg.textContent = "";
        const amount = validatePositiveNumber(
          document.getElementById("sip-amount").value,
          "Monthly SIP amount"
        );
        const years = validatePositiveNumber(
          document.getElementById("sip-years").value,
          "Investment duration"
        );
        const rate = validatePositiveNumber(
          document.getElementById("sip-rate").value,
          "Expected annual return"
        );
        const frequency = document.getElementById("sip-frequency").value;

        const months = years * 12;
        const annualRate = rate / 100;
        const monthlyRate = annualRate / 12;
        const contribution = frequency === "monthly" ? amount : amount / 12;

        const i = monthlyRate;
        const n = months;
        const fv =
          i === 0
            ? contribution * n
            : contribution * (((1 + i) ** n - 1) / i) * (1 + i);

        const totalInvested = contribution * n;
        const gain = fv - totalInvested;

        metricMainValue.textContent = formatNumber(Math.round(fv));
        metricMainSub.textContent =
          "Over " +
          years +
          " years, investing â‚¹" +
          formatNumber(amount) +
          " per month.";
        metricSideLine1.textContent =
          "Total invested: â‚¹" + formatNumber(Math.round(totalInvested));
        metricSideLine2.textContent =
          "Total returns: â‚¹" + formatNumber(Math.round(gain));
        metricChipLabel.textContent =
          "Assuming " + rate.toFixed(1) + "% annualised growth (input).";

        animateSummary();

        const labels = [];
        const values = [];
        const yearlyContribution = contribution * 12;
        for (let y = 1; y <= years; y++) {
          const iYear = annualRate;
          const nYear = y;
          const yearValue =
            iYear === 0
              ? yearlyContribution * nYear
              : yearlyContribution * (((1 + iYear) ** nYear - 1) / iYear);
          labels.push("Year " + y);
          values.push(Math.round(yearValue));
        }
        lineChart.data.labels = labels;
        lineChart.data.datasets[0].data = values;
        lineChart.data.datasets[0].label = "Corpus value";
        lineChart.data.datasets[0].borderColor = "#38bdf8";
        lineChart.data.datasets[0].backgroundColor =
          "rgba(56, 189, 248, 0.18)";
        lineChart.update();

        pieChart.data.labels = ["Invested", "Returns"];
        pieChart.data.datasets[0].data = [
          Math.round(totalInvested),
          Math.round(gain)
        ];
        pieChart.data.datasets[0].backgroundColor = ["#38bdf8", "#22c55e"];
        pieChart.update();
        updateLegend(
          pieChart.data.labels,
          pieChart.data.datasets[0].backgroundColor
        );

        animateViz();
      } catch (err) {
        errorMsg.textContent = err.message;
      }
    }

    function calculateEmi() {
      try {
        errorMsg.textContent = "";
        const principal = validatePositiveNumber(
          document.getElementById("emi-principal").value,
          "Loan amount"
        );
        const years = validatePositiveNumber(
          document.getElementById("emi-years").value,
          "Loan tenure"
        );
        const rate = validatePositiveNumber(
          document.getElementById("emi-rate").value,
          "Interest rate"
        );

        const months = years * 12;
        const monthlyRate = rate / 12 / 100;
        const r = monthlyRate;
        const n = months;

        let emi;
        if (r === 0) {
          emi = principal / n;
        } else {
          const factor = (1 + r) ** n;
          emi = (principal * r * factor) / (factor - 1);
        }

        const totalPayable = emi * n;
        const totalInterest = totalPayable - principal;

        metricMainValue.textContent = formatNumber(Math.round(emi));
        metricMainSub.textContent =
          "For a â‚¹" +
          formatNumber(principal) +
          " loan over " +
          years +
          " years at " +
          rate.toFixed(2) +
          "% p.a.";
        metricSideLine1.textContent =
          "Total payable: â‚¹" + formatNumber(Math.round(totalPayable));
        metricSideLine2.textContent =
          "Total interest: â‚¹" + formatNumber(Math.round(totalInterest));
        metricChipLabel.textContent =
          "Tenure: " + n + " months â€¢ Fixed EMI.";

        animateSummary();

        const labels = [];
        const balances = [];
        let balance = principal;
        for (let y = 1; y <= years; y++) {
          for (let m = 0; m < 12; m++) {
            const interestComp = balance * r;
            const principalComp = emi - interestComp;
            balance = Math.max(0, balance - principalComp);
          }
          labels.push("Year " + y);
          balances.push(Math.round(balance));
        }
        lineChart.data.labels = labels;
        lineChart.data.datasets[0].data = balances;
        lineChart.data.datasets[0].label = "Outstanding balance";
        lineChart.data.datasets[0].borderColor = "#f97316";
        lineChart.data.datasets[0].backgroundColor =
          "rgba(248, 171, 78, 0.22)";
        lineChart.update();

        pieChart.data.labels = ["Principal", "Interest"];
        pieChart.data.datasets[0].data = [
          Math.round(principal),
          Math.round(totalInterest)
        ];
        pieChart.data.datasets[0].backgroundColor = ["#38bdf8", "#f97316"];
        pieChart.update();
        updateLegend(
          pieChart.data.labels,
          pieChart.data.datasets[0].backgroundColor
        );

        animateViz();
      } catch (err) {
        errorMsg.textContent = err.message;
      }
    }

    btnSip.addEventListener("click", () => {
      if (currentMode === "sip") calculateSip();
      else setMode("sip");
    });

    btnEmi.addEventListener("click", () => {
      if (currentMode === "emi") calculateEmi();
      else setMode("emi");
    });

    btnReset.addEventListener("click", () => {
      document
        .querySelectorAll("input, textarea")
        .forEach((el) => (el.value = ""));
      errorMsg.textContent = "";
      setMode(currentMode);
      animateSummary();
      animateViz();
    });

    document
      .getElementById("contact-form")
      .addEventListener("submit", (e) => {
        e.preventDefault();
        alert("Thank you! This demo form is not wired to a backend yet.");
      });

    // Init
    initCharts();
    setMode("sip");
  </script>
</body>
</html>
